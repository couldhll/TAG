<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>TAGManager Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.1 (build 840)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">TAG </a></h1>
				<a id="developerHome" href="../index.html">CouldHll</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">TAGManager Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/dataLayer">&nbsp;&nbsp;&nbsp;&nbsp;dataLayer</option>
	
	<option value="//api/name/logger">&nbsp;&nbsp;&nbsp;&nbsp;logger</option>
	
	<option value="//api/name/refreshMode">&nbsp;&nbsp;&nbsp;&nbsp;refreshMode</option>
	
	
	
	
	<option value="class_methods">Class Methods</option>
	
	<option value="//api/name/instance">&nbsp;&nbsp;&nbsp;&nbsp;+ instance</option>
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/getContainerById:">&nbsp;&nbsp;&nbsp;&nbsp;- getContainerById:</option>
	
	<option value="//api/name/openContainerById:callback:">&nbsp;&nbsp;&nbsp;&nbsp;- openContainerById:callback:</option>
	
	<option value="//api/name/previewWithUrl:">&nbsp;&nbsp;&nbsp;&nbsp;- previewWithUrl:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/dataLayer">dataLayer</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/logger">logger</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/refreshMode">refreshMode</a></span></li>
	
</ul></li>



<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#class_methods">Class Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/instance">instance</a></span></li>
	
</ul></li>



<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/getContainerById:">getContainerById:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/openContainerById:callback:">openContainerById:callback:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/previewWithUrl:">previewWithUrl:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="TAGManager Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">TAGManager Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">TAGManager.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<ul>
<li>A class that is the mobile implementation of Google Tag Manager (GTM).
*</li>
<li>Sample usage:</li>
</ul>


<pre>
*      [TAGContainer](../Classes/TAGContainer.html) *container =
*          [[TAGManager instance] openContainerById:myContainerId];
*      NSString *value = [container stringForKey:@"myKey"];
*
*      [TAGDataLayer](../Classes/TAGDataLayer.html) *[dataLayer](#//api/name/dataLayer) =
*          [[TAGManager instance] dataLayer];
*      [[dataLayer](#//api/name/dataLayer) push:@{@"event": @"openScreen",
*                        @"screenName": @"Main Page"}];
</pre>


<p>*
* A container is a collection of macros, rules, and tags. It is created within
* the GTM application (<a href="http://www.google.com/tagmanager">http://www.google.com/tagmanager),</a>,) and is assigned
* a container ID. This container ID is the one used within this API.
*
* The <a href="../Classes/TAGContainer.html">TAGContainer</a> class provides methods for retrieving
* macro values given the macro name. The routines
* <a href="../Classes/TAGContainer.html">TAGContainer</a>::booleanForKey:, <a href="../Classes/TAGContainer.html">TAGContainer</a>::doubleForKey:,
* <a href="../Classes/TAGContainer.html">TAGContainer</a>::int64ForKey:, <a href="../Classes/TAGContainer.html">TAGContainer</a>::stringForKey: return the current
* value for the value collection macro name, depending on the rules associated with that macro
* in the container.
*
* As an example, if your container has a value collection macro with a key &ldquo;speed&rdquo; whose
* value is 32, and the enabling rule is Language is &ldquo;en&rdquo;; and another value collection macro
* with a key &ldquo;speed&rdquo; whose value is 45, and the enabling rule is Language is not &ldquo;en&rdquo;,
* then making the following call:
*</p>

<pre>
*     [container longForKey:\@"speed"]
</pre>


<p>*
* will return either 32 if the current language of the device is English, or
* 45 otherwise.</p>

<ul>
<li>The data layer is a map holding generic information about the application.</li>
<li>The <a href="../Classes/TAGDataLayer.html">TAGDataLayer</a> class provides methods to push and retrieve data from</li>
<li>the data layer. Pushing an <code>event</code> key to the data layer will</li>
<li>cause tags that match this event to fire.
*</li>
<li>An initial version of the container is bundled with the application. It</li>
<li>should be placed as a resource in the bundle with name</li>
<li><code>containerId</code> where <code>containerId</code> is the same container</li>
<li>ID you will use within this API. When you call</li>
<li>TAGManager::<a href="#//api/name/openContainerById:callback:">openContainerById:callback:</a>, the container will be</li>
<li>returned with those bundled rules/tags/macros. You will create the container</li>
<li>in the UI and use the Download button to download it.
*</li>
<li>You can modify the container in the UI and publish a new version. In that</li>
<li>case, the next time the mobile app refreshes the container from the network</li>
<li>(currently every 12 hours),</li>
<li>it will get that new version. When you call one of the get&hellip; routines, the</li>
<li>value will be computed using the most recent rules.
*</li>
<li>The downloaded container is saved locally. When you call</li>
<li>TAGManager::<a href="#//api/name/openContainerById:callback:">openContainerById:callback:</a>, it will first load the default</li>
<li>container, and will then asynchronously load any saved container. If none is</li>
<li>found or if it is older than 12 hours, it will try to retrieve a newer version</li>
<li>from the network. You can find the status of those asynchronous loads by</li>
<li>passing a <a href="../Protocols/TAGContainerCallback.html">TAGContainerCallback</a> to TAGManager::<a href="#//api/name/openContainerById:callback:">openContainerById:callback:</a>.
*</li>
<li>Sometimes you may want to block until either a non-default container is</li>
<li>available, or until a recent fresh container is available. You can do that</li>
<li>by  using the callbacks in TAGManager::<a href="#//api/name/openContainerById:callback:">openContainerById:callback:</a> or use</li>
<li><a href="../Classes/TAGContainerOpener.html">TAGContainerOpener</a>.
*</li>
<li>When you are finished with a container, call <a href="../Classes/TAGContainer.html">TAGContainer</a>::close.</li>
</ul>

					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/logger">&nbsp;&nbsp;logger</a></code>
		<span class="tooltip"><p>The logger to use for Google Tag Manager SDK. By default, Google Tag Manager
logs error/warning messages and ignores info/debug/verbose messages.
You can use your own customized logger by setting this property.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/refreshMode">&nbsp;&nbsp;refreshMode</a></code>
		<span class="tooltip"><p>The refresh mode used for Google Tag Manager SDK. Setting this to
@ref kTAGRefreshModeDefaultContainer allows the refresh
method to use only the default container for development purposes. Default is
@ref kTAGRefreshModeStandard.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/dataLayer">&nbsp;&nbsp;dataLayer</a></code>
		<span class="tooltip"><p>Call <a href="../Classes/TAGDataLayer.html">TAGDataLayer</a>::push: method to push events and other data.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/openContainerById:callback:">&ndash;&nbsp;openContainerById:callback:</a></code>
		<span class="tooltip"><p>Returns a container.
Usually the returned container will be empty, but the loading will happen
asynchronously, so the returned container may be refreshed before it
is returned, after it is returned, or may never be refreshed if, for example,
there is no network connection during the lifetime of the container.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/getContainerById:">&ndash;&nbsp;getContainerById:</a></code>
		<span class="tooltip"><p>Returns the container associated with the given <code>containerId</code>;
returns <code>nil</code> if the container is not already open.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/previewWithUrl:">&ndash;&nbsp;previewWithUrl:</a></code>
		<span class="tooltip"><ul>
<li>Previews the app with the input url.
*</li>
<li>The valid url must start with the following:</li>
</ul>


<pre>
* tagmanager.c.\<app_name\>://preview/p?id=
</pre>


<ul>
<li>where &lt;app_name&gt; is the application name.
*</li>
<li>@param url The preview url.</li>
<li>@return YES if the url is a valid tagmanager preview url.</li>
</ul>
</span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/instance">+&nbsp;instance</a></code>
		<span class="tooltip"><p>Gets the singleton instance of the TAGManager class, creating it if
necessary.</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/dataLayer" title="dataLayer"></a>
	<h3 class="subsubtitle method-title">dataLayer</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Call <a href="../Classes/TAGDataLayer.html">TAGDataLayer</a>::push: method to push events and other data.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly, strong) TAGDataLayer *dataLayer</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/logger" title="logger"></a>
	<h3 class="subsubtitle method-title">logger</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The logger to use for Google Tag Manager SDK. By default, Google Tag Manager
logs error/warning messages and ignores info/debug/verbose messages.
You can use your own customized logger by setting this property.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, strong) id&lt;TAGLogger&gt; logger</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/refreshMode" title="refreshMode"></a>
	<h3 class="subsubtitle method-title">refreshMode</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The refresh mode used for Google Tag Manager SDK. Setting this to
@ref kTAGRefreshModeDefaultContainer allows the refresh
method to use only the default container for development purposes. Default is
@ref kTAGRefreshModeStandard.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic) TAGRefreshMode refreshMode</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGManager.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					<div class="section section-methods">
						<a title="Class Methods" name="class_methods"></a>
						<h2 class="subtitle subtitle-methods">Class Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/instance" title="instance"></a>
	<h3 class="subsubtitle method-title">instance</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Gets the singleton instance of the TAGManager class, creating it if
necessary.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>+ (TAGManager *)instance</code></div>

    
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The singleton instance of TAGManager.</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGManager.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/getContainerById:" title="getContainerById:"></a>
	<h3 class="subsubtitle method-title">getContainerById:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns the container associated with the given <code>containerId</code>;
returns <code>nil</code> if the container is not already open.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (TAGContainer *)getContainerById:(NSString *)<em>containerId</em></code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/openContainerById:callback:" title="openContainerById:callback:"></a>
	<h3 class="subsubtitle method-title">openContainerById:callback:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns a container.
Usually the returned container will be empty, but the loading will happen
asynchronously, so the returned container may be refreshed before it
is returned, after it is returned, or may never be refreshed if, for example,
there is no network connection during the lifetime of the container.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (TAGContainer *)openContainerById:(NSString *)<em>containerId</em> callback:(id&lt;TAGContainerCallback&gt;)<em>callback</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>containerId</em></dt>
			<dd><p>The ID of the container to open.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>callback</em></dt>
			<dd><p>An object whose various methods will be called during the
loading process. Note that the methods may be called from different
threads. In addition, they may be called before
TAGManager::openContainerById:callback: returns.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The opened container.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Callback will be called as various things happen for
the container. At a minimum, TAGManager::openContainerById:callback: will
attempt to load a saved version of the container. If there is no saved
version, or if the saved version is out of date, attempt will be made to
load from the network.</p>

<p>If TAGManager::openContainerById:callback: is called a second time for a
given <code>containerId</code>, <code>nil</code> will be returned unless
the previous opened container has already been closed.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/previewWithUrl:" title="previewWithUrl:"></a>
	<h3 class="subsubtitle method-title">previewWithUrl:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<ul>
<li>Previews the app with the input url.
*</li>
<li>The valid url must start with the following:</li>
</ul>


<pre>
* tagmanager.c.\<app_name\>://preview/p?id=
</pre>


<ul>
<li>where &lt;app_name&gt; is the application name.
*</li>
<li>@param url The preview url.</li>
<li>@return YES if the url is a valid tagmanager preview url.</li>
</ul>

	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (BOOL)previewWithUrl:(NSURL *)<em>url</em></code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGManager.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 CouldHll. All rights reserved. (Last updated: 2013-10-23)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.1 (build 840)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>