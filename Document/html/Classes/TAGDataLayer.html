<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>TAGDataLayer Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.1 (build 840)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">TAG </a></h1>
				<a id="developerHome" href="../index.html">CouldHll</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">TAGDataLayer Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/get:">&nbsp;&nbsp;&nbsp;&nbsp;- get:</option>
	
	<option value="//api/name/push:">&nbsp;&nbsp;&nbsp;&nbsp;- push:</option>
	
	<option value="//api/name/pushValue:forKey:">&nbsp;&nbsp;&nbsp;&nbsp;- pushValue:forKey:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>









<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/get:">get:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/push:">push:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/pushValue:forKey:">pushValue:forKey:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="TAGDataLayer Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">TAGDataLayer Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">TAGDataLayer.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<ul>
<li>The data layer is a dictionary holding generic information about the</li>
<li>application. It uses a standard set of keys so it can be read by any party</li>
<li>that understands the specification. The data layer state is updated</li>
<li>through its API. For example, an app might start with the following</li>
<li>dataLayer:</li>
</ul>


<pre>
*   {
*     title: "Original screen title"
*   }
</pre>


<p>*
* As the state/data of an app can change, the app can update the dataLayer with a call such as:</p>

<pre>
*   [dataLayer push:@{@"title": @"New screen title"}];
</pre>


<ul>
<li>Now the data layer contains:</li>
</ul>


<pre>
*   {
*     title: "New screen title"
*   }
</pre>


<ul>
<li>After another push happens:</li>
</ul>


<pre>
*   [dataLayer push:@{@"xyz": @3}];
</pre>


<ul>
<li>The dataLayer contains:</li>
</ul>


<pre>
*   {
*     "title": "New screen title",
*     "xyz": 3
*   }
</pre>


<ul>
<li>The following example demonstrates how array and map merging works. If the</li>
<li>original dataLayer contains:</li>
</ul>


<pre>
*   {
*     "items": @[@"item1", [NSNull null], @"item2", @{@"a": @"aValue", @"b": @"bValue"}]
*   }
</pre>


<ul>
<li>After this push happens:</li>
</ul>


<pre>
*   [dataLayer push:@{@"items":
*       @[[NSNull null], @"item6", kTAGDataLayerObjectNotPresent, @{@"a": [NSNull null]}]}
</pre>


<ul>
<li>The dataLayer contains:</li>
</ul>


<pre>
*   {
*     "items": @[[NSNull null], @"item6", @"item2", @{@"a": [NSNull null], @"b": @"bValue"}]}
*   }
</pre>


<ul>
<li><p>Pushes happen synchronously; after the push, changes have been reflected</li>
<li>in the model.</li>
<li><p>When an <code>event</code> key is pushed to the data layer, rules for tags</li>
<li>are evaluated and any tags matching this event will fire.</li>
<li>For example, given a container with a tag whose firing rules is that &ldquo;event&rdquo;</li>
<li>is equal to &ldquo;openScreen&rdquo;, after this <a href="#//api/name/push:">push:</a></li>
</ul>


<pre>
*   [dataLayer push:@{@"event", @"openScreen"}];
</pre>


<ul>
<li>that tag will fire.</li>
</ul>

					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/pushValue:forKey:">&ndash;&nbsp;pushValue:forKey:</a></code>
		<span class="tooltip"><p>Pushes a key/value pair to the data layer. This is just a convenience
method that calls <code>push:@{key: value}</code>.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/push:">&ndash;&nbsp;push:</a></code>
		<span class="tooltip"><p>Merges the given <code>update</code> object into the existing data model,
calling any listeners with the update (after the merge occurs).</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/get:">&ndash;&nbsp;get:</a></code>
		<span class="tooltip"><p>Returns the object in the model associated with the given key.
If key isn&rsquo;t present, returns <code>nil</code>. If
<code>key</code> is present, but <code>NSNull</code>, returns
<code>NSNull</code>.</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/get:" title="get:"></a>
	<h3 class="subsubtitle method-title">get:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns the object in the model associated with the given key.
If key isn&rsquo;t present, returns <code>nil</code>. If
<code>key</code> is present, but <code>NSNull</code>, returns
<code>NSNull</code>.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (NSObject *)get:(NSString *)<em>key</em></code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p><p>The key can can have embedded periods. For example:
a key of <code>&ldquo;a.b.c&rdquo;</code> returns the value of the &ldquo;c&rdquo; key in
the dictionary with key &ldquo;b&rdquo; in the dictionary with key &ldquo;a&rdquo; in the model.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGDataLayer.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/push:" title="push:"></a>
	<h3 class="subsubtitle method-title">push:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Merges the given <code>update</code> object into the existing data model,
calling any listeners with the update (after the merge occurs).</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)push:(NSDictionary *)<em>update</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>update</em></dt>
			<dd><p>The update object to process</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p><p>It&rsquo;s valid for values in the dictionary (or embedded Arrays) to be
of type <code>NSNull</code>.
If you want to represent a missing value (like an empty index in a List),
use the <code>kTAGDataLayerObjectNotPresent</code> object.</p>

<p><p>This is normally a synchronous call.
However, if, while the thread is executing the push, another push happens
from the same thread, then that second push is asynchronous (the second push
will return before changes have been made to the data layer).  This second
push from the same thread can occur, for example, if a data layer push is
made in response to a tag firing. However, all updates will be processed
before the outermost push returns.
<p>If the <code>update</code> contains the key <code>event</code>, rules
will be evaluated and matching tags will fire.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGDataLayer.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/pushValue:forKey:" title="pushValue:forKey:"></a>
	<h3 class="subsubtitle method-title">pushValue:forKey:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Pushes a key/value pair to the data layer. This is just a convenience
method that calls <code>push:@{key: value}</code>.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)pushValue:(NSObject *)<em>value</em> forKey:(NSObject *)<em>key</em></code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">TAGDataLayer.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 CouldHll. All rights reserved. (Last updated: 2013-10-23)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.1 (build 840)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>